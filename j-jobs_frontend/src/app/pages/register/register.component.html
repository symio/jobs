<!-- src/app/pages/register/register.component.html -->
<main class="register-container">
    <section class="main-title-section">
        <h1 class="main-title">Inscription</h1>
    </section>

    <div class="register-form">
        <section class="content-section">
            <!-- Messages d'erreur -->
            <div *ngIf="error" class="alert alert-error">
                {{ error }}
            </div>

            <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
                <!-- name -->
                <div class="form-group" [class.is-invalid]="name?.invalid && name?.touched">
                    <label for="name" class="form-label required">Nom</label>
                    <input
                        type="text"
                        id="name"
                        formControlName="name"
                        [class.error]="name?.invalid && name?.touched"
                        placeholder="Entrez votre nom"
                        autocomplete="name"
                        >
                    <div *ngIf="name?.invalid && name?.touched" class="error-message">
                        <div *ngIf="name?.errors?.['required']">
                            Le nom est requis
                        </div>
                    </div>
                </div>
                <!-- firstname -->
                <div class="form-group" [class.is-invalid]="firstname?.invalid && firstname?.touched">
                    <label for="firstname" class="form-label required">Prénom</label>
                    <input
                        type="text"
                        id="firstname"
                        formControlName="firstname"
                        [class.error]="firstname?.invalid && firstname?.touched"
                        placeholder="Entrez votre nom"
                        autocomplete="firstname"
                        >
                    <div *ngIf="firstname?.invalid && firstname?.touched" class="error-message">
                        <div *ngIf="firstname?.errors?.['required']">
                            Le prénom est requis
                        </div>
                    </div>
                </div>
                <!-- Email -->
                <div class="form-group" [class.is-invalid]="email?.invalid && email?.touched">
                    <label for="email" class="form-label required">E-Mail</label>
                    <input
                        type="email"
                        id="email"
                        formControlName="email"
                        [class.error]="email?.invalid && email?.touched"
                        placeholder="Entrez votre e-mail"
                        autocomplete="username"
                        >
                    <div *ngIf="email?.invalid && email?.touched" class="error-message">
                        <div *ngIf="email?.errors?.['required']">
                            L'adresse e-mail est requise
                        </div>
                        <div *ngIf="email?.errors?.['email']">
                            Veuillez entrer une adresse e-mail valide
                        </div>
                    </div>
                </div>
                <!-- Mot de passe -->
                <div class="form-group" [class.is-invalid]="password?.invalid && password?.touched">
                    <label for="password" class="form-label required">Mot de passe</label>
                    <input
                        type="password"
                        id="password"
                        formControlName="password"
                        [class.error]="password?.invalid && password?.touched"
                        placeholder="Entrez votre mot de passe"
                        autocomplete="current-password"
                        >
                    <div *ngIf="password?.invalid && password?.touched" class="error-message">
                        <div *ngIf="password?.errors?.['required']">
                            Le mot de passe est requis
                        </div>
                        <div *ngIf="password?.errors?.['pattern']">
                            Le mot de passe doit contenir au moins 8 caractères, une lettre, un chiffre et un caractère spécial
                        </div>
                    </div>
                </div>
                <div class="form-group" [class.is-invalid]="passwordConfirm?.invalid && passwordConfirm?.touched">
                    <label for="passwordConfirm" class="form-label required">Confirmation du mot de passe</label>
                    <input
                        type="password"
                        id="passwordConfirm"
                        formControlName="passwordConfirm"
                        [class.error]="passwordConfirm?.invalid && passwordConfirm?.touched || registerForm.hasError('passwordsMismatch')"
                        placeholder="Entrez votre mot de passe"
                        autocomplete="current-passwordConfirm"
                        >
                    <div *ngIf="passwordConfirm?.touched && (passwordConfirm?.invalid || registerForm.hasError('passwordsMismatch'))" class="error-message">
                        <div *ngIf="passwordConfirm?.errors?.['required']">
                            La confirmation du mot de passe est requise
                        </div>
                        <div *ngIf="registerForm.hasError('passwordsMismatch')">
                            Les mots de passe ne correspondent pas
                        </div>
                    </div>
                </div>
                <!-- gdproptin --> 
                <div class="form-group checkbox-group gdproptin-group" [class.is-invalid]="gdproptin?.invalid && gdproptin?.touched">
                    <input type="checkbox" formControlName="gdproptin" id="gdproptin">
                    <label for="gdproptin" class="form-label required">
                        &nbsp;Je reconnais avoir pris connaissance et accepter les conditions d'utilisation et les règles de confidentialité
                    </label>

                    <div *ngIf="gdproptin?.invalid && gdproptin?.touched" class="error-message">
                        Vous devez accepter les conditions d’utilisation
                    </div>
                </div>
                <!-- Bouton de soumission -->
                <div class="cta-section">
                    <button
                        type="submit"
                        class="cta-button primary"
                        [disabled]="registerForm.invalid || loading"
                        >
                        <span *ngIf="loading" class="loading-text">Envoi en cours...</span>
                        <span *ngIf="!loading">Envoyer</span>
                    </button>
                </div>

                <!-- Liens -->
                <div class="links-section">
                    <p>
                        Déjà membre ? 
                        <a routerLink="/login" class="primary-link">Connexion</a>
                    </p>
                </div>
            </form>
        </section>
    </div>
</main>
